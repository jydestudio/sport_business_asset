System.register(["jimu-core","jimu-arcgis"],(function(e,t){var i={},n={};return{setters:[function(e){i.BaseWidget=e.BaseWidget,i.React=e.React},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent}],execute:function(){e((()=>{var e={244:e=>{"use strict";e.exports=i},686:e=>{"use strict";e.exports=n}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="";var a={};return r.p=window.jimuConfig.baseUrl,(()=>{"use strict";r.r(a),r.d(a,{__set_webpack_public_path__:()=>n,default:()=>i});var e=r(244),t=r(686);class i extends e.BaseWidget{constructor(t){super(t),this.onActiveViewChange=e=>{e&&(console.log("Selected Map:",e),this.setState({selectedMapView:e},(()=>{this.listenForLayerUpdates()})))},this.listenForLayerUpdates=()=>{const{selectedMapView:e}=this.state;if(!e)return void console.log("No selected map view");const t=e.view.map.layers.filter((e=>"feature"===e.type));t.forEach((e=>{e.watch("timeExtent",(e=>{console.log("Layer Filter Changed....,",e),t.forEach((t=>{t.when((()=>{console.log("Time Extent:",e),t.queryFeatures({where:t.definitionExpression||"1=1",outFields:["Name","Stage_Gate","District"],returnGeometry:!1,timeExtent:e||null}).then((e=>{const{allDistricts:t}=this.state;if(0===e.features.length){const e={};return t.forEach((t=>{e[t]=null})),void this.setState({rows:e})}const i=e.features.reduce(((e,t)=>{const{Name:i,Stage_Gate:n,District:r}=t.attributes;return e[r]||(e[r]={}),(!e[r][i]||e[r][i]<n)&&(e[r][i]=n),e}),{}),n=Object.keys(i),r=[...new Set([...t,...n])];r.forEach((e=>{i[e]||(i[e]=null)})),this.setState({rows:i,allDistricts:r})}))}))}))}))}))},this.renderSkeletonBars=()=>e.React.createElement("div",{style:{display:"flex",gap:"15px",alignItems:"flex-end",height:"200px"}},[1,2,3].map((t=>e.React.createElement("div",{key:`skeleton-${t}`,style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",marginRight:"15px"}},e.React.createElement("div",{style:{height:30+20*t+"px",width:"20px",background:"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:"2px"}}),e.React.createElement("div",{style:{position:"absolute",left:"-20px",bottom:"0",writingMode:"vertical-rl",textAlign:"center",fontSize:"14px",fontWeight:"500",color:"#d0d0d0",transform:"rotate(180deg)",whiteSpace:"nowrap",minWidth:"20px",overflow:"visible"}},"---"))))),this.state={selectedMapView:null,rows:{},allDistricts:[]}}render(){const{rows:i}=this.state,n={1:"#e43030ff",2:"#0089d8ff",3:"#28e270ff",4:"#E9C46A",5:"#6A4C93",6:"#F4A261",7:"#d114d1ff"},r=e=>n[e]||"#999";return e.React.createElement("div",{style:{padding:"2% 5%",textAlign:"left",backgroundColor:"#ffffff",minHeight:"300px"}},e.React.createElement("style",null,"\n      @keyframes shimmer {\n        0% {\n          background-position: -200% 0;\n        }\n        100% {\n          background-position: 200% 0;\n        }\n      }\n    "),e.React.createElement("h3",{style:{fontSize:"20px",fontWeight:"bold",marginBottom:"15px",color:"#333"}},"Stage Gates by District"),Object.keys(i).length>0?e.React.createElement("div",{style:{display:"flex",justifyContent:"space-between",gap:"40px",alignItems:"flex-end",flexWrap:"wrap"}},Object.entries(i).sort((([e],[t])=>e.localeCompare(t))).map((([t,i])=>e.React.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",alignItems:"space-between",minWidth:"200px"}},e.React.createElement("div",{style:{display:"flex",gap:"5px",alignItems:"flex-end",height:"200px",borderBottom:"2px solid #e0e0e0",padding:"10px",marginTop:"5px",borderRight:"2px solid #e0e0e0",backgroundColor:null===i?"#fafafa":"transparent",borderRadius:"4px"}},null===i?e.React.createElement(e.React.Fragment,null,this.renderSkeletonBars(),e.React.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#999",fontSize:"14px",fontStyle:"italic",whiteSpace:"nowrap"}})):Object.entries(i).map((([t,i])=>{const n=Math.min(i/7*150,150);return e.React.createElement("div",{key:t,style:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",marginRight:"15px"}},e.React.createElement("div",{style:{height:`${n}px`,width:"20px",backgroundColor:r(i),transition:"height 0.3s ease",overflow:"visible",whiteSpace:"nowrap",borderRadius:"2px 2px 0 0",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),e.React.createElement("div",{style:{position:"absolute",left:"-20px",bottom:"0",writingMode:"vertical-rl",textAlign:"center",fontSize:"14px",fontWeight:"600",color:"#333",transform:"rotate(180deg)",whiteSpace:"nowrap",minWidth:"20px",overflow:"visible"}},t),e.React.createElement("div",{style:{position:"absolute",top:"-25px",left:"50%",transform:"translateX(-50%)",fontSize:"12px",fontWeight:"bold",color:"#666",backgroundColor:"#fff",padding:"2px 6px",borderRadius:"3px",border:"1px solid #e0e0e0"}},i))}))),e.React.createElement("h4",{style:{fontSize:"16px",color:null===i?"#999":"#333",marginTop:"10px",fontWeight:"600",textAlign:"center"}},t))))):e.React.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"250px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px dashed #dee2e6"}},e.React.createElement("p",{style:{fontSize:"18px",color:"#6c757d"}},"No data available. Select a map to begin.")),e.React.createElement(t.JimuMapViewComponent,{useMapWidgetId:this.props.useMapWidgetIds[0],onActiveViewChange:this.onActiveViewChange}))}}function n(e){r.p=e}})(),a})())}}}));